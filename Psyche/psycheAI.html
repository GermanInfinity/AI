<html lang="en">

<head>
	<meta charset=utf-8>
	<title>Testing</title>
	
    <link rel="stylesheet" href="style.css" />
<style>

</style>

</head>

   <!-- Buttons --> 
   <button class="signup-button" onclick="create_user()">Create User</button>
   <button class="login-button" onclick="login()">Login</button>

   <div class="divform" id="loginform">
   	<form class="form-container">

   		<h1>LOGIN</h1>

	    <label for="username"><b>Username</b></label>
	    <input type="text" placeholder="Enter Username" name="username" required>

	    <label for="psw"><b>Password</b></label>
	    <input type="password" placeholder="Enter Password" name="psw" required>

	    <button type="submit" class="btn" form action="/test.php" method="post">Login</button>
	    <button type="button" class="btn cancel" onclick="closeForm()">Close</button>

   	</form>
   </div>

   <div class="divform" id="signupform">
   	<form class="form-container">

   		<h1>SIGN UP</h1>

	    <label for="username"><b>Username</b></label>
	    <input type="text" placeholder="Enter Username" name="username" required>

	    <label for="psw"><b>Password</b></label>
	    <input type="password" placeholder="Enter Password" name="psw" required>

	    <button type="submit" class="btn" onclick="signup()">Sign up</button>
	    <button type="button" class="btn cancel" onclick="closeForm()">Close</button>

   	</form>
   </div>
   

   <h1>
    <button class="btn" button type="button" onclick="onMic()"></button>
   </h1>

   <h2>
    <button type="button" id="stop"></button>
   </h2>

   <script>

    function login() { 
   	   document.getElementById('loginform').style.display = "block";
   	}

    function create_user() { 
   	   document.getElementById('signupform').style.display = "block";
   	}

   	function signup() {
   		var a = document.getElementById('signupform').elements["username"];
   		console.log(a);
   	}


    async function onMic() {
  
      let stream = null; 
      const options = {mimeType: 'audio/webm'};
      stream = await navigator.mediaDevices.getUserMedia({audio: true});

      const recordedChunks = [];

      let stop = false; 
	  const stopBtn = document.getElementById('stop');

	  stopBtn.addEventListener('click', function(){ 
	  	stop = true; 
	   	console.log("OOO");
	  });

      try { 
        const mediaRecorder = new MediaRecorder(stream, options);
        console.log("EEJEJ");
        mediaRecorder.addEventListener('dataavailable', function(e) { 
          if (e.data.size > 0) { 
            recordedChunks.push(e.data);
          }

          if (stop == true) { 
            mediaRecorder.stop();
            console.log("Here");
          }})

        mediaRecorder.addEventListener('stop', function() {
          console.log("HEHEH");
      	  downloadLink.href = URL.createObjectURL(new Blob(recordedChunks));
      	  downloadLink.download = 'test.wav';
        });
        mediaRecorder.start();
        console.log("EEJEJ2");
      }

      catch(err) {
          console.log("ERROR");
      }



    }
    //     let stream = null;
        
    //     try {

    //       const options = {mimeType: 'audio/webm'};

    //       const recordedChunks = [];

    //       const mediaRecorder = new MediaRecorder(stream, options); 

    //       console.log("HEaven");
    //       stream = await navigator.mediaDevices.getUserMedia({audio: true});
          

    //     } catch(err) { 
    //       console.log("Error");
    //     }
    

   </script>



<body>
</body>
  